<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion Employés</title>
    <link rel="stylesheet" href="/stylesheets/employes.css"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <%- include('includes/navBar.ejs') %>

    <div class="form-container">
        <h1>Liste des Employés</h1>

        <div id="message-container" class="alert alert-success" style="display: none;"></div>

        <% if (typeof user !== "undefined" && user.role === "admin") { %>
            <a href="/employes/ajout" id="ajouterEmploye" class="btn">
                <i class="fas fa-user-plus"></i> Ajouter un employé
            </a>
        <% } %>

        <table>
            <thead>
                <tr>
                    <th>Photo</th>
                    <th>Nom</th>
                    <th>Ville</th>
                    <th>Email</th>
                    <th>Rôle</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="employeeTableBody">
            </tbody>
        </table>
    </div>

    <%- include('includes/_chat') %>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const user = JSON.parse(localStorage.getItem("user"));

            if (user && user.role !== "admin") {
                const addEmployeeBtn = document.getElementById("ajouterEmploye");
                if (addEmployeeBtn) {
                    addEmployeeBtn.style.display = "none"; // Hide button
                }
            }
        });
    </script>

    <script src="/javascripts/employes.js"></script>
</body>
</html>
